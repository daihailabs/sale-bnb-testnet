(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[262],{3360:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/lock",function(){return t(20759)}])},94777:function(e,n,t){"use strict";t.d(n,{Z:function(){return m}});var r=t(85893),a=t(22073),s=t(76763),l=t(19180),c=(t(4639),t(51183)),o=t(41664),i=t(75638),d=function(e){var n=e.navs,t=e.pathname;return(0,r.jsxs)("aside",{className:"relative w-full xl:w-96 order-first xl:flex xl:flex-col flex-shrink-0 border-r border-gray-200 dark:border-gray-700 overflow-y-auto px-8 py-8",children:[(0,r.jsx)("h2",{className:"text-lg font-medium",children:"Trustsales Lock Protocol"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by create your token or lp token lock"}),(0,r.jsx)("ul",{role:"list",className:"mt-6",children:n.map((function(e,n){return(0,r.jsx)("li",{children:(0,r.jsx)(o.default,{href:e.href,children:(0,r.jsxs)("a",{className:(0,i.A)(t===e.href&&"bg-white shadow dark:bg-neutral-800","relative group hover:bg-gray-200 dark:hover:bg-neutral-800 py-4 flex items-start space-x-3 px-4 rounded"),children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("span",{className:(0,i.A)(e.iconColor,"inline-flex items-center justify-center h-10 w-10 rounded-lg"),children:(0,r.jsx)(e.icon,{className:"h-6 w-6","aria-hidden":"true"})})}),(0,r.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,r.jsxs)("div",{className:"text-sm font-medium",children:[(0,r.jsx)("span",{className:"absolute inset-0","aria-hidden":"true"}),e.name]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:e.description})]}),(0,r.jsx)("div",{className:"flex-shrink-0 self-center",children:(0,r.jsx)(c.Z,{className:"h-5 w-5 text-gray-400","aria-hidden":"true"})})]})})},n)}))})]})},u=t(11163),x=[{name:"Create lock",description:"Create token or liquidity pool token lock",href:"/lock",iconColor:"bg-yellow-500",icon:s.Z},{name:"View token lock",description:"List token lock using trustsale lock",href:"/lock/token",iconColor:"bg-yellow-500",icon:s.Z},{name:"View liquidity pool token lock",description:"List liquidity pool lock using trustsale lock",href:"/lock/lp",iconColor:"bg-yellow-500",icon:l.Z}],m=function(e){var n=e.children,t=(0,u.useRouter)();return(0,r.jsx)(a.Z,{children:(0,r.jsxs)("div",{className:"flex flex-wrap",children:[(0,r.jsx)("main",{className:"flex-1 relative z-0 overflow-y-auto focus:outline-none xl:order-last px-8 py-8",children:n}),(0,r.jsx)(d,{navs:x,pathname:t.pathname})]})})}},20759:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return D}});var r=t(85893),a=t(94777),s=t(34051),l=t.n(s),c=t(56371),o=t(82175),i=t(67294),d=t(9473),u=t(74538),x=t(56401),m=t(93819);t(31444);var h=t(14207),f=t(32241),p=t(15146),v=t(74082);var w=i.forwardRef((function(e,n){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",ref:n},e),i.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"}))})),k=t(77985),j=function(e){return e.substring(0,6)+"..."+e.substring(e.length-4,e.length)},b=(t(26044),t(15069)),N=t(58833),g=t(2102),y=t(2593),_=t(21046);function C(e,n,t,r,a,s,l){try{var c=e[s](l),o=c.value}catch(i){return void t(i)}c.done?n(o):Promise.resolve(o).then(r,a)}function L(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var s=e.apply(n,t);function l(e){C(s,r,a,l,c,"next",e)}function c(e){C(s,r,a,l,c,"throw",e)}l(void 0)}))}}function E(){return(0,r.jsx)("div",{className:"rounded-md bg-red-50 p-4 mb-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(w,{className:"h-5 w-5 text-red-400","aria-hidden":"true"})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Please connect your wallet"})})]})})}var A=function(e){var n=e.title,t=e.desc;return(0,r.jsx)("li",{children:(0,r.jsxs)("div",{className:"flex justify-between py-2",children:[(0,r.jsx)("div",{className:"",children:n}),(0,r.jsx)("div",{className:"",children:t})]})})},R=function(){var e=(0,d.v9)(p.aZ),n=(0,i.useState)(!1),t=n[0],a=(n[1],(0,i.useState)(null)),s=a[0],w=a[1],C=(0,i.useState)(!1),R=C[0],D=C[1],M=(0,d.v9)(p.g_),P=(0,d.I0)(),S=(0,d.v9)(f.t5),Z=(0,b.Z)(e),q=function(e){return(0,x.Z)(e,m)}((0,u.R_)(S)),T=function(e){return(0,x.C)(e,m)}((0,u.R_)(S)),O=(0,k.useWeb3React)().account,z=function(){var e=L(l().mark((function e(n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O){e.next=2;break}return e.abrupt("return",(0,g._)("Please connect your wallet"));case 2:if(R){e.next=6;break}return e.next=5,B();case 5:case 9:case 12:return e.abrupt("return",e.sent);case 6:if(!M.tokenA){e.next=10;break}return e.next=9,I(n);case 10:return e.next=12,Y(n);case 13:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),I=function(){var n=L(l().mark((function n(t){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,q.createLpTokenLock(t.owner||O,e,y.O$.from(t.amount*Math.pow(10,M.decimal)),~~(t.untilDate/1e3));case 3:return r=n.sent,n.next=6,r.wait(r);case 6:n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}(),Y=function(){var n=L(l().mark((function n(t){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log(t),n.next=4,q.createTokenLock(t.owner||O,e,y.O$.from(t.amount*Math.pow(10,M.decimal)),~~(t.untilDate/1e3));case 4:return r=n.sent,n.next=7,r.wait(1);case 7:(0,g.x)(),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0);case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}(),B=function(){var e=L(l().mark((function e(){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z.approve((0,u.R_)(S),_.Bz);case 3:return n=e.sent,e.next=6,n.wait(1);case 6:D(!0),(0,g.x)(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),D(!1);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),V=(0,i.useCallback)((function(){e&&P((0,p.qh)({lockContract:T,address:e}))}),[e]),F=(0,i.useCallback)(L(l().mark((function n(){var t;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e||!O){n.next=12;break}return n.prev=1,n.next=4,Z.balanceOf(O);case 4:t=n.sent,w(t.toString()),console.log(t.toString()),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),w(null);case 12:case"end":return n.stop()}}),n,null,[[1,9]])}))),[e,O,Z]);return(0,i.useEffect)((function(){V()}),[e]),(0,i.useEffect)((function(){F()}),[e,O,Z]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-4 bg-white shadow py-4 dark:bg-neutral-800 mb-4 rounded-t-xl rounded-b",children:(0,r.jsx)("div",{className:"text-2xl font-medium",children:"Create your lock"})}),(0,r.jsx)("div",{className:"mx-auto max-w-7xl px-4 bg-white shadow py-8 rounded dark:bg-neutral-800",children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)("div",{className:"",children:(0,r.jsx)(o.J9,{initialValues:{address:"",owner:"",amount:"",untilDate:""},validate:function(e){var n={};return e.address?(0,c.isAddress)(e.address)?P((0,p.Ag)(e.address)):n.address="Invalid address":n.address="Required",e.owner&&!(0,c.isAddress)(e.owner)&&(n.owner="Invalid address"),e.amount||(n.amount="Required"),s&&M&&e.amount&&Number(e.amount)>Number(s/Math.pow(10,M.decimal))&&(console.log(s/Math.pow(10,M.decimal)),n.amount="You don't have token"),e.untilDate?e.untilDate<Date.now()&&(n.untilDate="Must be after now"):n.untilDate="Required",n},onSubmit:z,children:(0,r.jsx)(o.l0,{children:(0,r.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[(0,r.jsx)("div",{className:"col-span-6",children:(0,r.jsx)(v.nv,{label:"Token or LP token address",name:"address",placeholder:"Enter token or LP token address"})}),M&&(0,r.jsxs)("div",{className:"col-span-6",children:[M&&!O&&(0,r.jsx)(E,{}),(0,r.jsxs)("ul",{className:"divide-y px-4 bg-white py-2 shadow rounded",children:[M&&(0,r.jsx)(A,{title:"Contract",desc:j(e)}),!M.tokenA&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(A,{title:"Name",desc:M.name}),(0,r.jsx)(A,{title:"Symbol",desc:M.symbol}),(0,r.jsx)(A,{title:"Decimals",desc:M.decimal}),(0,r.jsx)(A,{title:"Total Supply",desc:(0,h.Y4)(M.totalSupply/Math.pow(10,M.decimal),0)})]}),M.tokenA&&(0,r.jsx)(A,{title:"Pair",desc:"".concat(M.tokenA,"/").concat(M.tokenB)}),s&&(0,r.jsx)(A,{title:"Your balance",desc:(0,h.Y4)(s/Math.pow(10,M.decimal),4)})]})]}),(0,r.jsx)("div",{className:"col-span-6",children:(0,r.jsx)(v.nv,{label:"Owner",name:"owner",placeholder:"Enter owner address",info:"If you are input owner address. Unlocked token will send to owner address",required:!1})}),(0,r.jsx)("div",{className:"col-span-6",children:(0,r.jsx)(v.nv,{label:"Title",name:"title",placeholder:"Ex: My Lock",required:!1})}),(0,r.jsx)("div",{className:"col-span-6",children:(0,r.jsx)(v.nv,{label:"Amount",name:"amount",placeholder:"Enter amount"})}),(0,r.jsx)("div",{className:"col-span-6",children:(0,r.jsx)(v.Nn,{name:"untilDate",placeholderText:"Select date",label:"Lock until"})}),(0,r.jsx)("div",{className:"col-span-6",children:(0,r.jsx)(N.z,{text:R?"Create your lock":"Approve",type:"submit",isLoading:t})})]})})})})})})]})},D=function(){return(0,r.jsx)(a.Z,{children:(0,r.jsx)(R,{})})}}},function(e){e.O(0,[13,488,435,371,73,882,774,888,179],(function(){return n=3360,e(e.s=n);var n}));var n=e.O();_N_E=n}]);